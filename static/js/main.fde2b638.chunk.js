(this["webpackJsonpsupa-dupa-chat"]=this["webpackJsonpsupa-dupa-chat"]||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(13),s=a.n(r),i=(a(92),a(16)),o=a(74),l=a(79),u=a(145),d=(a(96),a(27)),b=a(17),j=a(136),h=a(3);var m=function(e){return Object(h.jsx)("div",{className:"main-container",children:Object(h.jsx)("h1",{children:"Welcome to chat"})})},O=a(139),x=a(75),p=a.n(x),f="CHATS::REMOVE_MESSAGE",g=Object(j.a)((function(e){return{button:{position:"absolute",top:"0",right:"0"},message:{border:"1px solid black",borderRadius:"10px",marginBottom:"10px",position:"relative"},messageHeader:{textAlign:"left",margin:"10px 20px"},messageText:{textAlign:"left",margin:"10px 20px",whiteSpace:"pre-wrap"},messageAuthor:{textAlign:"right",margin:"10px 20px"},smallText:{fontSize:"14px",color:"#AAA",fontWeight:"normal"}}}));var v=function(e){var t=Object(i.c)(),a=Object(c.useCallback)((function(e,a){t(function(e,t){return{type:f,chatId:e,messageId:t}}(e,a))}),[t]),n=g();return e.messages.map((function(t,c){return Object(h.jsxs)("article",{className:n.message,id:t.id,children:[Object(h.jsxs)("h2",{className:n.messageHeader,children:[Object(h.jsxs)("span",{className:n.smallText,children:["Theme:",Object(h.jsx)("br",{})]}),t.header]}),Object(h.jsxs)("p",{className:n.messageText,children:[Object(h.jsxs)("span",{className:n.smallText,children:["Message:",Object(h.jsx)("br",{})]}),t.text]}),Object(h.jsx)("p",{className:n.messageAuthor,children:Object(h.jsxs)("cite",{children:[Object(h.jsx)("span",{className:n.smallText,children:"Author: "}),t.author]})}),Object(h.jsx)(O.a,{onClick:function(){return a(e.chatId,t.id)},"aria-label":"delete",className:n.button+" delete-button",children:Object(h.jsx)(p.a,{color:"secondary"})})]},t.id)}))},w=a(39),N=a(77),C=a.n(N),y=a(141),S=a(142),I=a(147);var E=function(e){return Object(h.jsx)(y.a,{component:"nav","aria-label":"main mailbox folders",children:Object.values(e.chats).map((function(t){return Object(h.jsx)(d.b,{to:"/gbCourse5Hw/chats/"+t.id,className:e.classes.link,children:Object(h.jsxs)(S.a,{button:!0,className:t.id===e.chatId?e.classes.active:e.classes.root,children:[Object(h.jsx)(I.a,{primary:t.name}),Object(h.jsx)(O.a,{"aria-label":"close",onClick:function(a){return e.handleRemoveChat(t.id,a)},children:Object(h.jsx)(C.a,{})})]})},t.id)}))})},A=a(143),k=a(146);var T=function(e){return Object(h.jsxs)("form",{onSubmit:function(t){return e.handleAddChat(e.chatName,t)},className:e.classes.addChatForm,children:[Object(h.jsx)(k.a,{className:e.classes.chatName,value:e.chatName,onChange:e.hanldeChatName,id:"outlined-basic",label:"Chat name",variant:"outlined",size:"small"}),Object(h.jsx)(A.a,{value:"Add",variant:"contained",color:"primary",className:e.classes.button,type:"submit",children:"Add chat"})]})},H="CHATS::ADD_CHAT",_="CHATS::REMOVE_CHAT";function D(e){return e.chats}var F=Object(j.a)((function(e){return{button:{color:"#fff",whiteSpace:"noWrap",height:"100%"},link:{textDecoration:"none",color:e.palette.primary.main},active:{color:e.palette.secondary.main,backgroundColor:"#ccc"},chatName:{marginRight:"10px"},root:{maxWidth:"300px",padding:"15px"},addChatForm:{display:"flex",alignItems:"center"}}}));var R=function(e){var t=Object(c.useState)(""),a=Object(w.a)(t,2),n=a[0],r=a[1],s=Object(i.c)(),o=Object(i.d)(D,i.b),l=Object(c.useCallback)((function(e,t){t.preventDefault(),s(function(e){return{type:H,chatName:e}}(e)),r("")}),[s]),u=F();return Object(h.jsxs)("div",{className:u.root,children:[Object(h.jsx)(T,{handleAddChat:l,classes:u,chatName:n,hanldeChatName:function(e){r(e.target.value)}}),Object(h.jsx)(E,{chats:o,classes:u,handleRemoveChat:function(e,t){t.preventDefault(),t.stopPropagation(),s(function(e){return{type:_,chatId:e}}(e))},chatId:e.chatId})]})},W=a(144),M="CHATS::ADD_MESSAGE",B=function(e,t,a,c){return{type:M,chatId:e,messageTheme:t,messageText:a,messageAuthor:c}},L="CHATS::ADD_MESSAGE_WITH_SAGA";function G(e){return e.profile.checkboxState}function q(e){return e.profile.name}function P(e){return e.profile.wrongName}var X=Object(j.a)((function(e){return{root:{border:"1px solid black",borderRadius:"10px",display:"flex",flexDirection:"column","& > *":{margin:e.spacing(1)}},text:{height:"auto"},button:{alignSelf:"flex-end"}}}));var U=function(e){var t=Object(c.useState)(""),a=Object(w.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),o=Object(w.a)(s,2),l=o[0],u=o[1],d=Object(i.d)(q),j=Object(c.useRef)(null),m=Object(b.g)().chatId,O=Object(i.c)(),x=X(),p=Object(c.useCallback)((function(e,t,a,c,n){f(),j.current.focus(),n&&n.preventDefault(),O(function(e,t,a,c){return{type:L,chatId:e,messageTheme:t,messageText:a,messageAuthor:c}}(e,t,a,c))}),[O]),f=function(){r(""),u("")};return Object(c.useEffect)((function(){m&&j.current.focus()}),[m]),Object(h.jsxs)("form",{action:"",onSubmit:function(e){return p(m,n,l,d,e)},className:x.root,noValidate:!0,autoComplete:"off",children:[Object(h.jsx)(k.a,{className:x.text,value:n,onChange:function(e){r(e.target.value)},id:"outlined-basic",label:"Theme",variant:"outlined"}),Object(h.jsx)(k.a,{className:x.text,value:l,onChange:function(e){u(e.target.value)},inputRef:j,multiline:!0,rows:"5",id:"outlined-basic",label:"Message",variant:"outlined"}),Object(h.jsx)(A.a,{type:"submit",value:"Send",variant:"contained",color:"primary",className:x.button,endIcon:Object(h.jsx)(W.a,{children:"send"}),children:"Send"})]})},V=Object(j.a)((function(e){return{root:{display:"flex",justifyContent:"space-around",backgroundColor:"#EEE"},chat:{maxWidth:"700px",display:"flex",flexDirection:"column",padding:"15px",flexGrow:1}}}));var z=function(e){var t=V(),a=Object(b.g)().chatId,c=Object(i.d)(D);return a&&!c[a]?Object(h.jsx)(b.a,{to:"/gbCourse5Hw/chats"}):Object(h.jsxs)("div",{className:t.root,children:[Object(h.jsx)(R,{chatList:c,active:a,chatId:a}),Object(h.jsxs)("div",{className:t.chat,children:[Object(h.jsx)(v,{messages:a?c[a].messages:[],chatId:a}),!!a&&Object(h.jsx)(U,{})]})]})},K="PROFILE::CHECKBOX",J="PROFILE::NAME",Q=Object(j.a)((function(e){return{root:{display:"flex",backgroundColor:"#EEE",flexDirection:"column"},profileName:{position:"relative"},wrongName:{position:"absolute",top:"0",left:"calc(50% - 60px)",display:"block",padding:"10px",background:"#de2345"},hidden:{visibility:"hidden"}}}));var Y=function(e){var t=Object(c.useState)(""),a=Object(w.a)(t,2),n=a[0],r=a[1],s=Object(i.d)(G),o=Object(i.d)(q),l=Object(i.c)(),u=Object(i.d)(P),d=Q();return Object(h.jsxs)("div",{className:d.root,children:[Object(h.jsx)("h1",{children:"My Profile"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l({type:J,name:n}),r("")},className:d.profileName,children:[Object(h.jsx)(k.a,{required:!0,className:d.profileName,value:n,onChange:function(e){r(e.target.value)},id:"standard-basic",label:"Enter your name",variant:"standard"}),Object(h.jsx)("span",{className:(u?"":d.hidden)+" "+d.wrongName,children:"Wrong name!"})]}),Object(h.jsx)("input",{id:"display-my-name",type:"checkbox",checked:s,onChange:function(){l({type:K,checkboxState:!s})},value:s}),Object(h.jsx)("label",{htmlFor:"display-my-name",children:"Display my name"})]}),Object(h.jsx)("p",{className:s?"":d.hidden,children:o})]})};function Z(e){return e.news.newsList}function $(e){return e.news.error.status}function ee(e){return e.news.error.message}function te(e){return e.news.status}var ae="NEWS::GET_NEWS_REQUEST",ce="NEWS::GET_NEWS_SUCCESS",ne="NEWS::GET_NEWS_FAILURE",re="NEWS::GET_NEWS_WITH_SAGA",se=function(e){return{type:ce,news:e}},ie="idle",oe="request",le="success",ue="failure",de=Object(j.a)((function(e){return{root:{listStyle:"none"},newsItem:{display:"block",textDecoration:"none",color:e.palette.primary.main,marginBottom:"10px","&:visited":{color:e.palette.secondary.main}}}}));var be=function(e){var t=de(),a=Object(i.d)(Z),n=Object(i.d)($),r=Object(i.d)(ee),s=Object(i.d)(te),o=Object(i.c)(),l=Object(c.useCallback)((function(){o({type:re})}));Object(c.useEffect)((function(){l()}),[]);var u=Object(c.useCallback)((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:t.newsItem,children:e.title||"No description"})},e.id)}),[]);return n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:r}),Object(h.jsx)("button",{onClick:l,children:"reload"})]}):s===oe?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:"Loading..."})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("ul",{className:t.root,children:a.map(u)})})},je=Object(j.a)((function(e){return{header:{display:"flex",justifyContent:"space-around",minHeight:"50px",alignItems:"center","&>a":{display:"flex",alignItems:"center",height:"50px",textDecoration:"none",backgroundColor:"#ccc",color:"#708238",padding:"0 30px"}},message:{border:"1px solid black",borderRadius:"10px",marginBottom:"10px",position:"relative"},messageHeader:{textAlign:"left",margin:"10px 20px"},messageText:{textAlign:"left",margin:"10px 20px"},messageAuthor:{textAlign:"right",margin:"10px 20px"},smallText:{fontSize:"14px",color:"#AAA",fontWeight:"normal"}}}));var he=function(){var e=je();return Object(h.jsxs)(d.a,{children:[Object(h.jsxs)("header",{className:e.header,children:[Object(h.jsx)(d.b,{to:"/gbCourse5Hw/",children:"Main"}),Object(h.jsx)(d.b,{to:"/gbCourse5Hw/chats",children:"Chats"}),Object(h.jsx)(d.b,{to:"/gbCourse5Hw/profile",children:"Profile"}),Object(h.jsx)(d.b,{to:"/gbCourse5Hw/news",children:"News"})]}),Object(h.jsxs)(b.d,{children:[Object(h.jsx)(b.b,{path:"/gbCourse5Hw/chats/:chatId?",children:Object(h.jsx)(z,{})}),Object(h.jsx)(b.b,{path:"/gbCourse5Hw/profile",children:Object(h.jsx)(Y,{})}),Object(h.jsx)(b.b,{path:"/gbCourse5Hw/nochat",children:Object(h.jsx)("h4",{children:"\u0417\u0434\u0435\u0441\u044c \u0440\u044b\u0431\u044b \u043d\u0435\u0442"})}),Object(h.jsx)(b.b,{path:"/gbCourse5Hw/news",children:Object(h.jsx)(be,{})}),Object(h.jsx)(b.b,{exact:!0,path:"/gbCourse5Hw/",children:Object(h.jsx)(m,{})}),Object(h.jsx)(b.b,{children:Object(h.jsx)("h4",{children:"404"})})]})]})},me=a(25),Oe=a(80),xe=a(63),pe=a(78),fe=a.n(pe),ge={profile:{checkboxState:!1,name:"Name",wrongName:!1},chats:{chatId1:{name:"chat1",id:"chatId1",messages:[]},chatId2:{name:"chat2",id:"chatId2",messages:[]}},news:{newsList:[],error:{status:!1,message:""},status:ie}},ve=a(12);var we=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(ve.a)(Object(ve.a)({},e),{},{checkboxState:t.checkboxState});case J:return/bot/i.test(t.name)?Object(ve.a)(Object(ve.a)({},e),{},{wrongName:!0}):Object(ve.a)(Object(ve.a)({},e),{},{name:t.name,wrongName:!1});default:return e}},Ne=a(64),Ce=a(47),ye=ge.chats;var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:var a="chatId".concat(+new Date);return Object(ve.a)(Object(ve.a)({},e),{},Object(Ce.a)({},a,{name:t.chatName,id:a,messages:[]}));case _:return delete e[t.chatId],Object(ve.a)({},e);case M:return t.chatId&&e[t.chatId]?Object(ve.a)(Object(ve.a)({},e),{},Object(Ce.a)({},t.chatId,Object(ve.a)(Object(ve.a)({},e[t.chatId]),{},{messages:[].concat(Object(Ne.a)(e[t.chatId].messages),[{header:t.messageTheme,text:t.messageText,author:t.messageAuthor,id:"message-".concat(+new Date)}])}))):e;case f:var c=!!t.chatId&&!!e[t.chatId]&&e[t.chatId].messages.filter((function(e){return e.id!==t.messageId}));return Object(ve.a)(Object(ve.a)({},e),{},Object(Ce.a)({},t.chatId,Object(ve.a)(Object(ve.a)({},e[t.chatId]),{},{messages:Object(Ne.a)(c)})));default:return e}},Ie={news:[],error:!1,status:"idle"};var Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(ve.a)(Object(ve.a)({},e),{},{error:Object(ve.a)(Object(ve.a)({},e.error),{},{status:!1}),status:oe});case ce:return Object(ve.a)(Object(ve.a)({},e),{},{newsList:t.news,status:le});case ne:return Object(ve.a)(Object(ve.a)({},e),{},{error:Object(ve.a)(Object(ve.a)({},e.error),{},{status:!0,message:t.errorMessage}),status:ue});default:return e}},Ae=a(40),ke=a.n(Ae),Te=a(24),He=ke.a.mark(Re),_e=ke.a.mark(We),De=ke.a.mark(Me),Fe=function(e){return fetch(e).then((function(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.json()})).then((function(e){return e})).catch((function(e){throw e}))};function Re(e){var t;return ke.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Te.c)(B(e.chatId,e.messageTheme,e.messageText,e.messageAuthor));case 2:if("Bot"===e.messageAuthor){a.next=17;break}return a.prev=3,a.next=6,Object(Te.b)(2e3);case 6:return a.next=8,Object(Te.a)(Fe,"https://api.openweathermap.org/data/2.5/weather?id=498817&appid=f0694cc740867c7440b3be0552c0bf8f");case 8:return t=a.sent,a.next=11,Object(Te.c)(B(e.chatId,"\u041f\u043e\u0433\u043e\u0434\u0430","\u041f\u043e\u0433\u043e\u0434\u0430 \u0432 \u041f\u0438\u0442\u0435\u0440\u0435 ".concat(t.clouds.all>50?"\u043e\u0431\u043b\u0430\u0447\u043d\u0430\u044f":"\u0431\u0435\u0437\u043e\u0431\u043b\u0430\u0447\u043d\u0430\u044f","\n\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 ").concat((t.main.temp-273).toFixed(1)," \xb0C\n\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c ").concat(t.main.humidity," %\n\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430 ").concat(t.wind.speed," \u043c/\u0441"),"Bot"));case 11:a.next=17;break;case 13:return a.prev=13,a.t0=a.catch(3),a.next=17,Object(Te.c)(B(e.chatId,"\u041e\u0448\u0438\u0431\u043a\u0430",a.t0.message,"Bot"));case 17:case"end":return a.stop()}}),He,null,[[3,13]])}function We(e){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Te.c)({type:ae});case 3:return e.next=5,Object(Te.a)(Fe,"https://api.currentsapi.services/v1/latest-news?language=ru&apiKey=6qmiCnF5XcC6Zt8s4fj5gRg9kBKB58XFqw8Rw6QqsYOtD1M8");case 5:return t=e.sent,e.next=8,Object(Te.c)(se(t.news));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Te.c)((a=e.t0.message,{type:ne,errorMessage:a}));case 14:case"end":return e.stop()}var a}),_e,null,[[0,10]])}function Me(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.d)(L,Re);case 2:return e.next=4,Object(Te.e)(re,We);case 4:case"end":return e.stop()}}),De)}var Be=Me,Le=Object(me.b)({profile:we,chats:Se,news:Ee}),Ge={onError:function(e,t){console.log("qqq"+e),console.log(t)}},qe=Object(Oe.a)(Ge),Pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.c,Xe={key:"root",storage:fe.a},Ue=Object(xe.a)(Xe,Le),Ve=Object(me.d)(Ue,ge,Pe(Object(me.a)(qe)));qe.run(Be);var ze=Object(xe.b)(Ve),Ke=Object(l.a)({palette:{primary:{main:"#708238"},secondary:{main:"#0098FF"}}});var Je=function(){return Object(h.jsx)(i.a,{store:Ve,children:Object(h.jsx)(o.a,{persistor:ze,children:Object(h.jsx)(u.a,{theme:Ke,children:Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(he,{})})})})})},Qe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,148)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(Je,{})}),document.getElementById("root")),Qe()},92:function(e,t,a){},96:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.fde2b638.chunk.js.map